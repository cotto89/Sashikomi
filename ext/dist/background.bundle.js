!function(n){function t(r){if(e[r])return e[r].exports;var o=e[r]={exports:{},id:r,loaded:!1};return n[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var e={};return t.m=n,t.c=e,t.p="",t(0)}({0:function(n,t,e){"use strict";function r(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t["default"]=n,t}function o(n){return n&&n.__esModule?n:{"default":n}}var i=e(170),u=(o(i),e(169)),c=r(u);chrome.tabs.onUpdated.addListener(function(n,t,e){c.getMemosByUrl(e.url).then(function(t){t.length&&(chrome.tabs.sendMessage(n,{type:"TAB_ON_UPDATED",data:t}),chrome.pageAction.show(n))})["catch"](function(n){return console.log(n)})}),chrome.contextMenus.create({id:"sashikomi_context_menu",title:"Sashikomi",contexts:["selection"]}),chrome.contextMenus.onClicked.addListener(function(n,t){chrome.tabs.sendMessage(t.id,{type:"CONTEXT_MENU"})}),chrome.pageAction.onClicked.addListener(function(n){chrome.pageAction.getTitle({tabId:n.id},function(t){t.match(/error/)&&(sessionStorage.insetionErrorURL=n.url,chrome.tabs.create({url:chrome.extension.getURL("insertion_error.html")}))})})},5:function(n,t,e){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}Object.defineProperty(t,"__esModule",{value:!0});var o=e(164),i=r(o),u=e(154),c=r(u);t["default"]={pick:i["default"],omit:c["default"],uuid:function a(){var n,t,a="";for(n=0;32>n;n++)t=16*Math.random()|0,(8==n||12==n||16==n||20==n)&&(a+="-"),a+=(12==n?4:16==n?3&t|8:t).toString(16);return a}}},154:function(n,t,e){function r(n,t,e,r){var o=-1,i=n.length;for(r&&i&&(e=n[++o]);++o<i;)e=t(e,n[o],o,n);return e}function o(n){return function(t){return n(t)}}function i(n,t,e,r){var i=-1,u=a,l=!0,d=n.length,p=[],m=t.length;if(!d)return p;e&&(t=f(t,o(e))),r?(u=s,l=!1):t.length>=v&&(u=h,l=!1,t=new c(t));n:for(;++i<d;){var y=n[i],g=e?e(y):y;if(l&&g===g){for(var b=m;b--;)if(t[b]===g)continue n;p.push(y)}else u(t,g,r)||p.push(y)}return p}function u(n,t){return n=Object(n),r(t,function(t,e){return e in n&&(t[e]=n[e]),t},{})}var c=e(160),a=e(155),s=e(156),f=e(157),l=e(158),h=e(159),d=e(162),p=e(163),v=200,m=p(function(n,t){return null==n?{}:(t=f(l(t),String),u(n,i(d(n),t)))});n.exports=m},155:function(n,t){function e(n,t){return!!n.length&&r(n,t,0)>-1}function r(n,t,e){if(t!==t)return o(n,e);for(var r=e-1,i=n.length;++r<i;)if(n[r]===t)return r;return-1}function o(n,t,e){for(var r=n.length,o=t+(e?0:-1);e?o--:++o<r;){var i=n[o];if(i!==i)return o}return-1}n.exports=e},156:function(n,t){function e(n,t,e){for(var r=-1,o=n.length;++r<o;)if(e(t,n[r]))return!0;return!1}n.exports=e},157:function(n,t){function e(n,t){for(var e=-1,r=n.length,o=Array(r);++e<r;)o[e]=t(n[e],e,n);return o}n.exports=e},158:function(n,t){(function(t){function e(n,t){for(var e=-1,r=t.length,o=n.length;++e<r;)n[o+e]=t[e];return n}function r(n,t,o,u){u||(u=[]);for(var a=-1,s=n.length;++a<s;){var f=n[a];c(f)&&(o||w(f)||i(f))?t?r(f,t,o,u):e(u,f):o||(u[u.length]=f)}return u}function o(n){return function(t){return null==t?void 0:t[n]}}function i(n){return c(n)&&y.call(n,"callee")&&(!b.call(n,"callee")||g.call(n)==d)}function u(n){return null!=n&&!("function"==typeof n&&a(n))&&s(_(n))}function c(n){return l(n)&&u(n)}function a(n){var t=f(n)?g.call(n):"";return t==p||t==v}function s(n){return"number"==typeof n&&n>-1&&n%1==0&&h>=n}function f(n){var t=typeof n;return!!n&&("object"==t||"function"==t)}function l(n){return!!n&&"object"==typeof n}var h=9007199254740991,d="[object Arguments]",p="[object Function]",v="[object GeneratorFunction]",m=t.Object.prototype,y=m.hasOwnProperty,g=m.toString,b=m.propertyIsEnumerable,_=o("length"),w=Array.isArray;n.exports=r}).call(t,function(){return this}())},159:function(n,t){function e(n,t){var e=n.__data__;if(r(t)){var i=e.__data__,u="string"==typeof t?i.string:i.hash;return u[t]===o}return e.has(t)}function r(n){var t=typeof n;return"number"==t||"boolean"==t||"string"==t&&"__proto__"!==n||null==n}var o="__lodash_hash_undefined__";n.exports=e},160:function(n,t,e){function r(n){var t=-1,e=n?n.length:0;for(this.__data__=new u;++t<e;)this.push(n[t])}function o(n){var t=this.__data__;if(i(n)){var e=t.__data__,r="string"==typeof n?e.string:e.hash;r[n]=c}else t.set(n,c)}function i(n){var t=typeof n;return"number"==t||"boolean"==t||"string"==t&&"__proto__"!==n||null==n}var u=e(161),c="__lodash_hash_undefined__";r.prototype.push=o,n.exports=r},161:function(n,t){(function(t){function e(n){var t=!1;if(null!=n&&"function"!=typeof n.toString)try{t=!!(n+"")}catch(e){}return t}function r(){}function o(n,t){return u(n,t)&&delete n[t]}function i(n,t){if(R){var e=n[t];return e===O?void 0:e}return K.call(n,t)?n[t]:void 0}function u(n,t){return R?void 0!==n[t]:K.call(n,t)}function c(n,t,e){n[t]=R&&void 0===e?O:e}function a(n){var t=-1,e=n?n.length:0;for(this.clear();++t<e;){var r=n[t];this.set(r[0],r[1])}}function s(){this.__data__={hash:new r,map:M?new M:[],string:new r}}function f(n){var t=this.__data__;return _(n)?o("string"==typeof n?t.string:t.hash,n):M?t.map["delete"](n):p(t.map,n)}function l(n){var t=this.__data__;return _(n)?i("string"==typeof n?t.string:t.hash,n):M?t.map.get(n):v(t.map,n)}function h(n){var t=this.__data__;return _(n)?u("string"==typeof n?t.string:t.hash,n):M?t.map.has(n):m(t.map,n)}function d(n,t){var e=this.__data__;return _(n)?c("string"==typeof n?e.string:e.hash,n,t):M?e.map.set(n,t):g(e.map,n,t),this}function p(n,t){var e=y(n,t);if(0>e)return!1;var r=n.length-1;return e==r?n.pop():F.call(n,e,1),!0}function v(n,t){var e=y(n,t);return 0>e?void 0:n[e][1]}function m(n,t){return y(n,t)>-1}function y(n,t){for(var e=n.length;e--;)if(w(n[e][0],t))return e;return-1}function g(n,t,e){var r=y(n,t);0>r?n.push([t,e]):n[r][1]=e}function b(n,t){var e=null==n?void 0:n[t];return k(e)?e:void 0}function _(n){var t=typeof n;return"number"==t||"boolean"==t||"string"==t&&"__proto__"!==n||null==n}function w(n,t){return n===t||n!==n&&t!==t}function x(n){var t=S(n)?N.call(n):"";return t==D||t==j}function S(n){var t=typeof n;return!!n&&("object"==t||"function"==t)}function P(n){return!!n&&"object"==typeof n}function k(n){return null==n?!1:x(n)?B.test(I.call(n)):P(n)&&(e(n)?B:E).test(n)}var O="__lodash_hash_undefined__",D="[object Function]",j="[object GeneratorFunction]",T=/[\\^$.*+?()[\]{}|]/g,E=/^\[object .+?Constructor\]$/,A=t.Array.prototype,C=t.Object.prototype,I=t.Function.prototype.toString,K=C.hasOwnProperty,N=C.toString,B=RegExp("^"+I.call(K).replace(T,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),F=A.splice,M=b(t,"Map"),R=b(Object,"create");r.prototype=R?R(null):C,a.prototype.clear=s,a.prototype["delete"]=f,a.prototype.get=l,a.prototype.has=h,a.prototype.set=d,n.exports=a}).call(t,function(){return this}())},162:function(n,t){(function(t){function e(n,t){for(var e=-1,r=Array(n);++e<n;)r[e]=t(e);return r}function r(n,t){return n="number"==typeof n||S.test(n)?+n:-1,t=null==t?g:t,n>-1&&n%1==0&&t>n}function o(n){for(var t,e=[];!(t=n.next()).done;)e.push(t.value);return e}function i(n){n=null==n?n:Object(n);var t=[];for(var e in n)t.push(e);return t}function u(n){return function(t){return null==t?void 0:t[n]}}function c(n){var t=n?n.length:void 0;return d(t)&&(A(n)||m(n)||s(n))?e(t,String):null}function a(n){var t=n&&n.constructor,e="function"==typeof t&&t.prototype||P;return n===e}function s(n){return l(n)&&k.call(n,"callee")&&(!T.call(n,"callee")||O.call(n)==b)}function f(n){return null!=n&&!("function"==typeof n&&h(n))&&d(E(n))}function l(n){return v(n)&&f(n)}function h(n){var t=p(n)?O.call(n):"";return t==_||t==w}function d(n){return"number"==typeof n&&n>-1&&n%1==0&&g>=n}function p(n){var t=typeof n;return!!n&&("object"==t||"function"==t)}function v(n){return!!n&&"object"==typeof n}function m(n){return"string"==typeof n||!A(n)&&v(n)&&O.call(n)==x}function y(n){for(var t=-1,e=a(n),o=i(n),u=o.length,s=c(n),f=!!s,l=s||[],h=l.length;++t<u;){var d=o[t];f&&("length"==d||r(d,h))||"constructor"==d&&(e||!k.call(n,d))||l.push(d)}return l}var g=9007199254740991,b="[object Arguments]",_="[object Function]",w="[object GeneratorFunction]",x="[object String]",S=/^(?:0|[1-9]\d*)$/,P=t.Object.prototype,k=P.hasOwnProperty,O=P.toString,D=t.Reflect,j=D?D.enumerate:void 0,T=P.propertyIsEnumerable;j&&!T.call({valueOf:1},"valueOf")&&(i=function(n){return o(j(n))});var E=u("length"),A=Array.isArray;n.exports=y}).call(t,function(){return this}())},163:function(n,t){(function(t){function e(n,t,e){var r=e?e.length:0;switch(r){case 0:return n.call(t);case 1:return n.call(t,e[0]);case 2:return n.call(t,e[0],e[1]);case 3:return n.call(t,e[0],e[1],e[2])}return n.apply(t,e)}function r(n,t){if("function"!=typeof n)throw new TypeError(a);return t=w(void 0===t?n.length-1:u(t),0),function(){for(var r=arguments,o=-1,i=w(r.length-t,0),u=Array(i);++o<i;)u[o]=r[t+o];switch(t){case 0:return n.call(this,u);case 1:return n.call(this,r[0],u);case 2:return n.call(this,r[0],r[1],u)}var c=Array(t+1);for(o=-1;++o<t;)c[o]=r[o];return c[t]=u,e(n,this,c)}}function o(n){var t=i(n)?_.call(n):"";return t==h||t==d}function i(n){var t=typeof n;return!!n&&("object"==t||"function"==t)}function u(n){if(!n)return 0===n?n:0;if(n=c(n),n===s||n===-s){var t=0>n?-1:1;return t*f}var e=n%1;return n===n?e?n-e:n:0}function c(n){if(i(n)){var t=o(n.valueOf)?n.valueOf():n;n=i(t)?t+"":t}if("string"!=typeof n)return 0===n?n:+n;n=n.replace(p,"");var e=m.test(n);return e||y.test(n)?g(n.slice(2),e?2:8):v.test(n)?l:+n}var a="Expected a function",s=1/0,f=1.7976931348623157e308,l=NaN,h="[object Function]",d="[object GeneratorFunction]",p=/^\s+|\s+$/g,v=/^[-+]0x[0-9a-f]+$/i,m=/^0b[01]+$/i,y=/^0o[0-7]+$/i,g=parseInt,b=t.Object.prototype,_=b.toString,w=Math.max;n.exports=r}).call(t,function(){return this}())},164:function(n,t,e){function r(n,t,e,r){var o=-1,i=n.length;for(r&&i&&(e=n[++o]);++o<i;)e=t(e,n[o],o,n);return e}function o(n,t){return n=Object(n),r(t,function(t,e){return e in n&&(t[e]=n[e]),t},{})}var i=e(165),u=e(166),c=u(function(n,t){return null==n?{}:o(n,i(t))});n.exports=c},165:function(n,t){(function(t){function e(n,t){for(var e=-1,r=t.length,o=n.length;++e<r;)n[o+e]=t[e];return n}function r(n,t,o,u){u||(u=[]);for(var a=-1,s=n.length;++a<s;){var f=n[a];c(f)&&(o||w(f)||i(f))?t?r(f,t,o,u):e(u,f):o||(u[u.length]=f)}return u}function o(n){return function(t){return null==t?void 0:t[n]}}function i(n){return c(n)&&y.call(n,"callee")&&(!b.call(n,"callee")||g.call(n)==d)}function u(n){return null!=n&&!("function"==typeof n&&a(n))&&s(_(n))}function c(n){return l(n)&&u(n)}function a(n){var t=f(n)?g.call(n):"";return t==p||t==v}function s(n){return"number"==typeof n&&n>-1&&n%1==0&&h>=n}function f(n){var t=typeof n;return!!n&&("object"==t||"function"==t)}function l(n){return!!n&&"object"==typeof n}var h=9007199254740991,d="[object Arguments]",p="[object Function]",v="[object GeneratorFunction]",m=t.Object.prototype,y=m.hasOwnProperty,g=m.toString,b=m.propertyIsEnumerable,_=o("length"),w=Array.isArray;n.exports=r}).call(t,function(){return this}())},166:function(n,t){(function(t){function e(n,t,e){var r=e?e.length:0;switch(r){case 0:return n.call(t);case 1:return n.call(t,e[0]);case 2:return n.call(t,e[0],e[1]);case 3:return n.call(t,e[0],e[1],e[2])}return n.apply(t,e)}function r(n,t){if("function"!=typeof n)throw new TypeError(a);return t=w(void 0===t?n.length-1:u(t),0),function(){for(var r=arguments,o=-1,i=w(r.length-t,0),u=Array(i);++o<i;)u[o]=r[t+o];switch(t){case 0:return n.call(this,u);case 1:return n.call(this,r[0],u);case 2:return n.call(this,r[0],r[1],u)}var c=Array(t+1);for(o=-1;++o<t;)c[o]=r[o];return c[t]=u,e(n,this,c)}}function o(n){var t=i(n)?_.call(n):"";return t==h||t==d}function i(n){var t=typeof n;return!!n&&("object"==t||"function"==t)}function u(n){if(!n)return 0===n?n:0;if(n=c(n),n===s||n===-s){var t=0>n?-1:1;return t*f}var e=n%1;return n===n?e?n-e:n:0}function c(n){if(i(n)){var t=o(n.valueOf)?n.valueOf():n;n=i(t)?t+"":t}if("string"!=typeof n)return 0===n?n:+n;n=n.replace(p,"");var e=m.test(n);return e||y.test(n)?g(n.slice(2),e?2:8):v.test(n)?l:+n}var a="Expected a function",s=1/0,f=1.7976931348623157e308,l=NaN,h="[object Function]",d="[object GeneratorFunction]",p=/^\s+|\s+$/g,v=/^[-+]0x[0-9a-f]+$/i,m=/^0b[01]+$/i,y=/^0o[0-7]+$/i,g=parseInt,b=t.Object.prototype,_=b.toString,w=Math.max;n.exports=r}).call(t,function(){return this}())},168:function(n,t,e){(function(n,r){function o(n,t){this._id=n,this._clearFn=t}var i=e(178).nextTick,u=Function.prototype.apply,c=Array.prototype.slice,a={},s=0;t.setTimeout=function(){return new o(u.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new o(u.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(n){n.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(n,t){clearTimeout(n._idleTimeoutId),n._idleTimeout=t},t.unenroll=function(n){clearTimeout(n._idleTimeoutId),n._idleTimeout=-1},t._unrefActive=t.active=function(n){clearTimeout(n._idleTimeoutId);var t=n._idleTimeout;t>=0&&(n._idleTimeoutId=setTimeout(function(){n._onTimeout&&n._onTimeout()},t))},t.setImmediate="function"==typeof n?n:function(n){var e=s++,r=arguments.length<2?!1:c.call(arguments,1);return a[e]=!0,i(function(){a[e]&&(r?n.apply(null,r):n.call(null),t.clearImmediate(e))}),e},t.clearImmediate="function"==typeof r?r:function(n){delete a[n]}}).call(t,e(168).setImmediate,e(168).clearImmediate)},169:function(n,t,e){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}function o(n){var t=h["default"].pick(n,["id","url","targetElmPath","contentText"]);return d.transaction("rw",d.memos,function(){return d.memos.put(t).then(function(n){return d.memos.get(n)})})}function i(n){var t=n.id||-1;return d.transaction("rw",d.memos,function(){return d.memos["delete"](t)})}function u(n){return d.transaction("rw",d.memos,function(){return d.memos.where("url").equals(n).toArray()})}function c(){var n=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],t=n.map(function(n){var t=h["default"].pick(n,["id","url","targetElmPath","contentText"]);return Object.assign({},t,{insertionError:!0})});d.transaction("rw",d.memos,function(){return t.forEach(function(n){return d.memos.put(n)})})["catch"](function(n){return console.log(n)})}function a(n){return u(n).then(function(n){return n.filter(function(n){return n.insertionError?n:void 0})})["catch"](function(n){return console.log(n)})}Object.defineProperty(t,"__esModule",{value:!0}),t.db=void 0,t.save=o,t.remove=i,t.getMemosByUrl=u,t.addInsertionErrorFlag=c,t.getInsertionErrorData=a;var s=e(176),f=r(s),l=e(5),h=r(l),d=t.db=function(){var n=new f["default"]("SashikomiDB");return n.version(1).stores({memos:"++id, url"}),n.open(),n}()},170:function(n,t,e){"use strict";function r(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t["default"]=n,t}Object.defineProperty(t,"__esModule",{value:!0});var o=e(169),i=r(o);t["default"]=function(){function n(n,t){i.save(n.data).then(function(n){return t({status:"success",data:n})})["catch"](function(n){return t({status:"error",errorMessage:n})})}function t(n,t){i.remove(n.data).then(t({status:"success"}))["catch"](t({status:"error"}))}function e(n,t){chrome.pageAction.setTitle({tabId:t.tab.id,title:"Sashikomi has insertion error("+n.data.length+")"}),chrome.pageAction.setIcon({tabId:t.tab.id,path:"icons/icon19_error.png"})}function r(n){i.addInsertionErrorFlag(n.data)}function o(n){var t=sessionStorage.insetionErrorURL;i.getInsertionErrorData(t).then(function(e){n({status:"success",data:{url:t,errors:e}})})["catch"](function(n){return console.error(n)})}function u(n){var t=n.url,e=n.tab.id;i.getMemosByUrl(t).then(function(n){n.length?chrome.pageAction.show(e):chrome.pageAction.hide(e)})}chrome.runtime.onMessage.addListener(function(i,c,a){switch(i.type){case"PUT":return n(i,a),u(c),!0;case"DELETE":return t(i,a),u(c),!0;case"HAS_INSERTION_ERRORS":return e(i,c),r(i),!0;case"GET_INSERTION_ERRORS":return o(a),!0;default:console.log("Error: Unknown request."),console.log(i)}})}()},176:function(n,t,e){var r;(function(o){(function(n,t,e){"use strict";function r(n,t){return"object"!=typeof t&&(t=t()),Object.keys(t).forEach(function(e){n[e]=t[e]}),n}function i(n){return{from:function(t){return n.prototype=Object.create(t.prototype),n.prototype.constructor=n,{extend:function(e){r(n.prototype,"object"!=typeof e?e(t.prototype):e)}}}}}function u(n,t){return t(n)}function c(n,t){function o(){Dn.on("versionchange",function(n){Dn.close(),Dn.on("error").fire(new vn("Database version changed by other database connection."))})}function l(n){this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null},this.stores({})}function p(n,t,e,r){if(0===n){Object.keys(mn).forEach(function(n){w(t,n,mn[n].primKey,mn[n].indexes)});var o=Dn._createTransaction(On,gn,mn);o.idbtrans=t,o.idbtrans.onerror=A(e,["populating database"]),o.on("error").subscribe(e),q.newPSD(function(){q.PSD.trans=o;try{Dn.on("populate").fire(o)}catch(n){r.onerror=t.onerror=function(n){n.preventDefault()};try{t.abort()}catch(i){}t.db.close(),e(n)}})}else{var i=[],c=yn.filter(function(t){return t._cfg.version===n})[0];if(!c)throw new vn("Dexie specification of currently installed DB version is missing");mn=Dn._dbSchema=c._cfg.dbschema;var a=!1,s=yn.filter(function(t){return t._cfg.version>n});s.forEach(function(n){var r=mn,o=n._cfg.dbschema;sn(r,t),sn(o,t),mn=Dn._dbSchema=o;var c=b(r,o);c.add.forEach(function(n){i.push(function(t,e){w(t,n[0],n[1].primKey,n[1].indexes),e()})}),c.change.forEach(function(n){if(n.recreate)throw new vn("Not yet support for changing primary key");i.push(function(t,e){var r=t.objectStore(n.name);n.add.forEach(function(n){$(r,n)}),n.change.forEach(function(n){r.deleteIndex(n.name),$(r,n)}),n.del.forEach(function(n){r.deleteIndex(n)}),e()})}),n._cfg.contentUpgrade&&i.push(function(t,r){a=!0;var i=Dn._createTransaction(On,[].slice.call(t.db.objectStoreNames,0),o);i.idbtrans=t;var c=0;i._promise=u(i._promise,function(n){return function(t,e,o){function i(n){return function(){n.apply(this,arguments),0===--c&&r()}}return++c,n.call(this,t,function(n,t,r){arguments[0]=i(n),arguments[1]=i(t),e.apply(this,arguments)},o)}}),t.onerror=A(e,["running upgrader function for version",n._cfg.version]),i.on("error").subscribe(e),n._cfg.contentUpgrade(i),0===c&&r()}),a&&cn()||i.push(function(n,t){T(o,n),t()})});var f=function(){try{i.length?i.shift()(t,f):k(mn,t)}catch(n){r.onerror=t.onerror=function(n){n.preventDefault()};try{t.abort()}catch(o){}t.db.close(),e(n)}};f()}}function b(n,t){var e={del:[],add:[],change:[]};for(var r in n)t[r]||e.del.push(r);for(var r in t){var o=n[r],i=t[r];if(o){var u={name:r,def:t[r],recreate:!1,del:[],add:[],change:[]};if(o.primKey.src!==i.primKey.src)u.recreate=!0,e.change.push(u);else{var c=o.indexes.reduce(function(n,t){return n[t.name]=t,n},{}),a=i.indexes.reduce(function(n,t){return n[t.name]=t,n},{});for(var s in c)a[s]||u.del.push(s);for(var s in a){var f=c[s],l=a[s];f?f.src!==l.src&&u.change.push(l):u.add.push(l)}(u.recreate||u.del.length>0||u.add.length>0||u.change.length>0)&&e.change.push(u)}}else e.add.push([r,i])}return e}function w(n,t,e,r){var o=n.db.createObjectStore(t,e.keyPath?{keyPath:e.keyPath,autoIncrement:e.auto}:{autoIncrement:e.auto});return r.forEach(function(n){$(o,n)}),o}function k(n,t){Object.keys(n).forEach(function(e){t.db.objectStoreNames.contains(e)||w(t,e,n[e].primKey,n[e].indexes)})}function T(n,t){for(var r=0;r<t.db.objectStoreNames.length;++r){var o=t.db.objectStoreNames[r];(null===n[o]||n[o]===e)&&t.db.deleteObjectStore(o)}}function $(n,t){n.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function W(n,t){throw new vn("Table "+t[0]+" not part of transaction. Original Scope Function Source: "+c.Promise.PSD.trans.scopeFunc.toString())}function G(n,t,e,r){this.name=n,this.schema=e,this.hook=bn[n]?bn[n].hook:g(null,{creating:[h,a],reading:[f,s],updating:[d,a],deleting:[m,a]}),this._tpf=t,this._collClass=r||z}function J(n,t,e,r){G.call(this,n,t,e,r||Y)}function H(n,t,e,r){function o(n,t,e,r){return i._promise(n,e,r)}var i=this;this.db=Dn,this.mode=n,this.storeNames=t,this.idbtrans=null,this.on=g(this,["complete","error"],"abort"),this._reculock=0,this._blockedFuncs=[],this._psd=null,this.active=!0,this._dbschema=e,r&&(this.parent=r),this._tpf=o,this.tables=Object.create(_n);for(var u=t.length-1;-1!==u;--u){var c=t[u],a=Dn._tableFactory(n,e[c],o);this.tables[c]=a,this[c]||(this[c]=a)}}function V(n,t,e){this._ctx={table:n,index:":id"===t?null:t,collClass:n._collClass,or:e}}function z(n,t){var e=null,r=null;if(t)try{e=t()}catch(o){r=o}var i=n._ctx;this._ctx={table:i.table,index:i.index,isPrimKey:!i.index||i.table.schema.primKey.keyPath&&i.index===i.table.schema.primKey.name,range:e,op:"openCursor",dir:"next",unique:"",algorithm:null,filter:null,isMatch:null,offset:0,limit:1/0,error:r,or:i.or}}function Y(){z.apply(this,arguments)}function X(n,t){return n._cfg.version-t._cfg.version}function Q(n,t,e,r,o,i){e.forEach(function(e){var u=Dn._tableFactory(r,o[e],t);n.forEach(function(n){n[e]||(i?Object.defineProperty(n,e,{configurable:!0,enumerable:!0,get:function(){var n=q.PSD&&q.PSD.trans;return n&&n.db===Dn?n.tables[e]:u}}):n[e]=u)})})}function Z(n){n.forEach(function(n){for(var t in n)n[t]instanceof G&&delete n[t]})}function nn(n,t,e,r,o,i){var u=q.PSD;i=i||s,n.onerror||(n.onerror=A(o)),t?n.onsuccess=x(function(u){var c=n.result;if(c){var a=function(){c["continue"]()};t(c,function(n){a=n},r,o)&&e(i(c.value),c,function(n){a=n}),a()}else r()},o,u):n.onsuccess=x(function(t){var o=n.result;if(o){var u=function(){o["continue"]()};e(i(o.value),o,function(n){u=n}),u()}else r()},o,u)}function tn(n){var t=[];return n.split(",").forEach(function(n){n=n.trim();var e=n.replace("&","").replace("++","").replace("*",""),r=0!==e.indexOf("[")?e:n.substring(n.indexOf("[")+1,n.indexOf("]")).split("+");t.push(new N(e,r||null,-1!==n.indexOf("&"),-1!==n.indexOf("*"),-1!==n.indexOf("++"),Array.isArray(r),-1!==r.indexOf(".")))}),t}function en(n,t){return t>n?-1:n>t?1:0}function rn(n,t){return t>n?1:n>t?-1:0}function on(n){return function(t,e){for(var r=0;;){var o=n(t[r],e[r]);if(0!==o)return o;if(++r,r===t.length||r===e.length)return n(t.length,e.length)}}}function un(n,t){return n?t?function(){return n.apply(this,arguments)&&t.apply(this,arguments)}:n:t}function cn(){return navigator.userAgent.indexOf("Trident")>=0||navigator.userAgent.indexOf("MSIE")>=0}function an(){if(Dn.verno=wn.version/10,Dn._dbSchema=mn={},gn=[].slice.call(wn.objectStoreNames,0),0!==gn.length){var n=wn.transaction(M(gn),"readonly");gn.forEach(function(t){for(var e=n.objectStore(t),r=e.keyPath,o=r&&"string"==typeof r&&-1!==r.indexOf("."),i=new N(r,r||"",!1,!1,!!e.autoIncrement,r&&"string"!=typeof r,o),u=[],c=0;c<e.indexNames.length;++c){var a=e.index(e.indexNames[c]);r=a.keyPath,o=r&&"string"==typeof r&&-1!==r.indexOf(".");var s=new N(a.name,r,!!a.unique,!!a.multiEntry,!1,r&&"string"!=typeof r,o);u.push(s)}mn[t]=new B(t,i,u,{})}),Q([bn],Dn._transPromiseFactory,Object.keys(mn),On,mn)}}function sn(n,t){for(var e=t.db.objectStoreNames,r=0;r<e.length;++r)for(var o=e[r],i=t.objectStore(o),u=0;u<i.indexNames.length;++u){var c=i.indexNames[u],a=i.index(c).keyPath,s="string"==typeof a?a:"["+[].slice.call(a).join("+")+"]";if(n[o]){var f=n[o].idxByName[s];f&&(f.name=c)}}}var fn=t&&t.addons||c.addons,ln=c.dependencies,hn=ln.indexedDB,dn=ln.IDBKeyRange,pn=(ln.IDBTransaction,ln.DOMError,ln.TypeError),vn=ln.Error,mn=this._dbSchema={},yn=[],gn=[],bn={},_n={},wn=null,xn=!0,Sn=null,Pn=!1,kn="readonly",On="readwrite",Dn=this,jn=[],Tn=!0,En=!!R();this.version=function(n){if(wn)throw new vn("Cannot add version when database is open");this.verno=Math.max(this.verno,n);var t=yn.filter(function(t){return t._cfg.version===n})[0];return t?t:(t=new l(n),yn.push(t),yn.sort(X),t)},r(l.prototype,{stores:function(n){this._cfg.storesSource=this._cfg.storesSource?r(this._cfg.storesSource,n):n;var t={};yn.forEach(function(n){r(t,n._cfg.storesSource)});var e=this._cfg.dbschema={};return this._parseStoresSpec(t,e),mn=Dn._dbSchema=e,Z([bn,Dn,_n]),Q([_n],W,Object.keys(e),On,e),Q([bn,Dn,this._cfg.tables],Dn._transPromiseFactory,Object.keys(e),On,e,!0),gn=Object.keys(e),this},upgrade:function(n){var t=this;return U(function(){n(Dn._createTransaction(On,Object.keys(t._cfg.dbschema),t._cfg.dbschema))}),this._cfg.contentUpgrade=n,this},_parseStoresSpec:function(n,t){Object.keys(n).forEach(function(e){if(null!==n[e]){var r={},o=tn(n[e]),i=o.shift();if(i.multi)throw new vn("Primary key cannot be multi-valued");i.keyPath&&P(r,i.keyPath,i.auto?0:i.keyPath),o.forEach(function(n){if(n.auto)throw new vn("Only primary key can be marked as autoIncrement (++)");if(!n.keyPath)throw new vn("Index must have a name and cannot be an empty string");P(r,n.keyPath,n.compound?n.keyPath.map(function(){return""}):"")}),t[e]=new B(e,i,o,r)}})}}),this._allTables=bn,this._tableFactory=function(n,t,e){return n===kn?new G(t.name,e,t,z):new J(t.name,e,t)},this._createTransaction=function(n,t,e,r){return new H(n,t,e,r)},this._transPromiseFactory=function(n,t,e){if(!xn||q.PSD&&q.PSD.letThrough){var r=Dn._createTransaction(n,t,mn);return r._promise(n,function(n,t){r.error(function(n){Dn.on("error").fire(n)}),e(function(t){r.complete(function(){n(t)})},t,r)})}var o=new q(function(r,i){jn.push({resume:function(){var u=Dn._transPromiseFactory(n,t,e);o.onuncatched=u.onuncatched,u.then(r,i)}})});return o},this._whenReady=function(n){return new q(L||!xn||q.PSD&&q.PSD.letThrough?n:function(t,e){jn.push({resume:function(){n(t,e)}})})},this.verno=0,this.open=function(){return new q(function(t,e){function r(n){try{o.transaction.abort()}catch(t){}Pn=!1,Sn=n,xn=!1,e(Sn),jn.forEach(function(n){n.resume()}),jn=[]}if(L&&t(Dn),wn||Pn)throw new vn("Database already opened or being opened");var o,i=!1;try{if(Sn=null,Pn=!0,yn.length>0&&(Tn=!1),!hn)throw new vn("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using Safari, make sure to include indexedDB polyfill.");if(o=Tn?hn.open(n):hn.open(n,Math.round(10*Dn.verno)),!o)throw new vn("IndexedDB API not available");o.onerror=A(r,["opening database",n]),o.onblocked=function(n){Dn.on("blocked").fire(n)},o.onupgradeneeded=x(function(t){if(Tn&&!Dn._allowEmptyDB){o.onerror=function(n){n.preventDefault()},o.transaction.abort(),o.result.close();var e=hn.deleteDatabase(n);e.onsuccess=e.onerror=function(){r(new vn("Database '"+n+"' doesnt exist"))}}else{0===t.oldVersion&&(i=!0),o.transaction.onerror=A(r);var u=t.oldVersion>Math.pow(2,62)?0:t.oldVersion;p(u/10,o.transaction,r,o)}},r),o.onsuccess=x(function(e){Pn=!1,wn=o.result,Tn?an():wn.objectStoreNames.length>0&&sn(mn,wn.transaction(M(wn.objectStoreNames),kn)),wn.onversionchange=Dn.on("versionchange").fire,En||K(function(t){return-1===t.indexOf(n)?t.push(n):void 0}),q.newPSD(function(){function n(){xn=!1,jn.forEach(function(n){n.resume()}),jn=[],t(Dn)}q.PSD.letThrough=!0;try{var e=Dn.on.ready.fire();e&&"function"==typeof e.then?e.then(n,function(n){wn.close(),wn=null,r(n)}):_(n)}catch(o){r(o)}})},r)}catch(u){r(u)}})},this.close=function(){wn&&(wn.close(),wn=null,xn=!0,Sn=null)},this["delete"]=function(){var t=arguments;return new q(function(e,r){function o(){Dn.close();var t=hn.deleteDatabase(n);t.onsuccess=function(){En||K(function(t){var e=t.indexOf(n);return e>=0?t.splice(e,1):void 0}),e()},t.onerror=A(r,["deleting",n]),t.onblocked=function(){Dn.on("blocked").fire()}}if(t.length>0)throw new vn("Arguments not allowed in db.delete()");Pn?jn.push({resume:o}):o()})},this.backendDB=function(){return wn},this.isOpen=function(){return null!==wn},this.hasFailed=function(){return null!==Sn},this.dynamicallyOpened=function(){return Tn},this.name=n,Object.defineProperty(this,"tables",{get:function(){return Object.keys(bn).map(function(n){return bn[n]})}}),this.on=g(this,"error","populate","blocked",{ready:[y,a],versionchange:[v,a]}),this.on.ready.subscribe=u(this.on.ready.subscribe,function(n){return function(t,e){function r(){return e||Dn.on.ready.unsubscribe(r),t.apply(this,arguments)}n.call(this,r),Dn.isOpen()&&(xn?jn.push({resume:r}):r())}}),U(function(){Dn.on("populate").fire(Dn._createTransaction(On,gn,mn)),Dn.on("error").fire(new vn)}),this.transaction=function(n,t,e){function r(t,r){var i=null;try{if(a)throw a;i=Dn._createTransaction(n,s,mn,o);var c=s.map(function(n){return i.tables[n]});c.push(i);var f,l=0;q.newPSD(function(){q.PSD.trans=i,i.scopeFunc=e,o&&(i.idbtrans=o.idbtrans,i._promise=u(i._promise,function(n){return function(t,e,r){function o(n){return function(t){var e;return q._rootExec(function(){e=n(t),q._tickFinalize(function(){0===--l&&i.active&&(i.active=!1,i.on.complete.fire())})}),e}}return++l,n.call(this,t,function(n,t,r){return e(o(n),o(t),r)},r)}})),i.complete(function(){t(f)}),i.error(function(n){i.idbtrans&&(i.idbtrans.onerror=I);try{i.abort()}catch(t){}o&&(o.active=!1,o.on.error.fire(n));var e=r(n);o||e||Dn.on.error.fire(n)}),q._rootExec(function(){f=e.apply(i,c)})}),(!i.idbtrans||o&&0===l)&&i._nop()}catch(h){i&&i.idbtrans&&(i.idbtrans.onerror=I),i&&i.abort(),o&&o.on.error.fire(h),_(function(){r(h)||Dn.on("error").fire(h)})}}t=[].slice.call(arguments,1,arguments.length-1),e=arguments[arguments.length-1];var o=q.PSD&&q.PSD.trans;o&&o.db===Dn&&-1===n.indexOf("!")||(o=null);var i=-1!==n.indexOf("?");n=n.replace("!","").replace("?","");var c=Array.isArray(t[0])?t.reduce(function(n,t){return n.concat(t)}):t,a=null,s=c.map(function(n){return"string"==typeof n?n:(n instanceof G||(a=a||new pn("Invalid type. Arguments following mode must be instances of Table or String")),n.name)});return"r"==n||n==kn?n=kn:"rw"==n||n==On?n=On:a=new vn("Invalid transaction mode: "+n),o&&(a||(o&&o.mode===kn&&n===On&&(i?o=null:a=a||new vn("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY")),o&&s.forEach(function(n){o.tables.hasOwnProperty(n)||(i?o=null:a=a||new vn("Table "+n+" not included in parent transaction. Parent Transaction function: "+o.scopeFunc.toString()))}))),o?o._promise(n,r,"lock"):Dn._whenReady(r)},this.table=function(n){if(L&&Tn)return new J(n);if(!bn.hasOwnProperty(n))throw new vn("Table does not exist");return bn[n]},r(G.prototype,function(){function n(){throw new vn("Current Transaction is READONLY")}return{_trans:function(n,t,e){return this._tpf(n,[this.name],t,e)},_idbstore:function(n,t,e){if(L)return new q(t);var r=this;return this._tpf(n,[this.name],function(n,e,o){t(n,e,o.idbtrans.objectStore(r.name),o)},e)},get:function(n,t){var e=this;return this._idbstore(kn,function(t,r,o){L&&t(e.schema.instanceTemplate);var i=o.get(n);i.onerror=A(r,["getting",n,"from",e.name]),i.onsuccess=function(){t(e.hook.reading.fire(i.result))}}).then(t)},where:function(n){return new V(this,n)},count:function(n){return this.toCollection().count(n)},offset:function(n){return this.toCollection().offset(n)},limit:function(n){return this.toCollection().limit(n)},reverse:function(){return this.toCollection().reverse()},filter:function(n){return this.toCollection().and(n)},each:function(n){var t=this;return L&&n(t.schema.instanceTemplate),this._idbstore(kn,function(e,r,o){var i=o.openCursor();i.onerror=A(r,["calling","Table.each()","on",t.name]),nn(i,null,n,e,r,t.hook.reading.fire)})},toArray:function(n){var t=this;return this._idbstore(kn,function(n,e,r){L&&n([t.schema.instanceTemplate]);var o=[],i=r.openCursor();i.onerror=A(e,["calling","Table.toArray()","on",t.name]),nn(i,null,function(n){o.push(n)},function(){n(o)},e,t.hook.reading.fire)}).then(n)},orderBy:function(n){return new this._collClass(new V(this,n))},toCollection:function(){return new this._collClass(new V(this))},mapToClass:function(n,t){this.schema.mappedClass=n;var e=Object.create(n.prototype);t&&E(e,t),this.schema.instanceTemplate=e;var r=function(t){if(!t)return t;var e=Object.create(n.prototype);
for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=r,this.hook("reading",r),n},defineClass:function(n){return this.mapToClass(c.defineClass(n),n)},add:n,put:n,"delete":n,clear:n,update:n}}),i(J).from(G).extend(function(){return{add:function(n,t){var r=this,o=this.hook.creating.fire;return this._idbstore(On,function(i,u,c,s){var f={};if(o!==a){var l=t||(c.keyPath?S(n,c.keyPath):e),h=o.call(f,l,n,s);l===e&&h!==e&&(c.keyPath?P(n,c.keyPath,h):t=h)}var d=t?c.add(n,t):c.add(n);d.onerror=A(function(n){return f.onerror&&f.onerror(n),u(n)},["adding",n,"into",r.name]),d.onsuccess=function(t){var e=c.keyPath;e&&P(n,e,t.target.result),f.onsuccess&&f.onsuccess(t.target.result),i(d.result)}})},put:function(n,t){var r=this,o=this.hook.creating.fire,i=this.hook.updating.fire;return o!==a||i!==a?this._trans(On,function(o,i,u){var c=t||r.schema.primKey.keyPath&&S(n,r.schema.primKey.keyPath);c===e?u.tables[r.name].add(n).then(o,i):(u._lock(),n=D(n),u.tables[r.name].where(":id").equals(c).modify(function(t){this.value=n}).then(function(e){return 0===e?u.tables[r.name].add(n,t):c})["finally"](function(){u._unlock()}).then(o,i))}):this._idbstore(On,function(e,o,i){var u=t?i.put(n,t):i.put(n);u.onerror=A(o,["putting",n,"into",r.name]),u.onsuccess=function(t){var r=i.keyPath;r&&P(n,r,t.target.result),e(u.result)}})},"delete":function(n){return this.hook.deleting.subscribers.length?this.where(":id").equals(n)["delete"]():this._idbstore(On,function(t,e,r){var o=r["delete"](n);o.onerror=A(e,["deleting",n,"from",r.name]),o.onsuccess=function(n){t(o.result)}})},clear:function(){return this.hook.deleting.subscribers.length?this.toCollection()["delete"]():this._idbstore(On,function(n,t,e){var r=e.clear();r.onerror=A(t,["clearing",e.name]),r.onsuccess=function(t){n(r.result)}})},update:function(n,t){if("object"!=typeof t||Array.isArray(t))throw new vn("db.update(keyOrObject, modifications). modifications must be an object.");if("object"!=typeof n||Array.isArray(n))return this.where(":id").equals(n).modify(t);Object.keys(t).forEach(function(e){P(n,e,t[e])});var r=S(n,this.schema.primKey.keyPath);return r===e&&q.reject(new vn("Object does not contain its primary key")),this.where(":id").equals(r).modify(t)}}}),r(H.prototype,{_lock:function(){return++this._reculock,1===this._reculock&&q.PSD&&(q.PSD.lockOwnerFor=this),this},_unlock:function(){if(0===--this._reculock)for(q.PSD&&(q.PSD.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var n=this._blockedFuncs.shift();try{n()}catch(t){}}return this},_locked:function(){return this._reculock&&(!q.PSD||q.PSD.lockOwnerFor!==this)},_nop:function(n){this.tables[this.storeNames[0]].get(0).then(n)},_promise:function(n,t,e){var r=this;return q.newPSD(function(){var o;return r._locked()?o=new q(function(o,i){r._blockedFuncs.push(function(){r._promise(n,t,e).then(o,i)})}):(o=r.active?new q(function(o,i){if(!r.idbtrans&&n){if(!wn)throw new vn(Sn?"Database not open. Following error in populate, ready or upgrade function made Dexie.open() fail: "+Sn:"Database not open");var u=r.idbtrans=wn.transaction(M(r.storeNames),r.mode);u.onerror=function(n){r.on("error").fire(n&&n.target.error),n.preventDefault(),r.abort()},u.onabort=function(n){_(function(){r.on("error").fire(new vn("Transaction aborted for unknown reason"))}),r.active=!1,r.on("abort").fire(n)},u.oncomplete=function(n){r.active=!1,r.on("complete").fire(n)}}e&&r._lock();try{t(o,i,r)}catch(a){c.ignoreTransaction(function(){r.on("error").fire(a)}),r.abort(),i(a)}}):q.reject(C(new vn("Transaction is inactive. Original Scope Function Source: "+r.scopeFunc.toString()))),r.active&&e&&o["finally"](function(){r._unlock()})),o.onuncatched=function(n){c.ignoreTransaction(function(){r.on("error").fire(n)}),r.abort()},o})},complete:function(n){return this.on("complete",n)},error:function(n){return this.on("error",n)},abort:function(){if(this.idbtrans&&this.active)try{this.active=!1,this.idbtrans.abort(),this.on.error.fire(new vn("Transaction Aborted"))}catch(n){}},table:function(n){if(!this.tables.hasOwnProperty(n))throw new vn("Table "+n+" not in transaction");return this.tables[n]}}),r(V.prototype,function(){function n(n,t){try{throw t}catch(e){n._ctx.error=e}return n}function t(n){return Array.prototype.slice.call(1===n.length&&Array.isArray(n[0])?n[0]:n)}function e(n){return"next"===n?function(n){return n.toUpperCase()}:function(n){return n.toLowerCase()}}function r(n){return"next"===n?function(n){return n.toLowerCase()}:function(n){return n.toUpperCase()}}function o(n,t,e,r,o,i){for(var u=Math.min(n.length,r.length),c=-1,a=0;u>a;++a){var s=t[a];if(s!==r[a])return o(n[a],e[a])<0?n.substr(0,a)+e[a]+e.substr(a+1):o(n[a],r[a])<0?n.substr(0,a)+r[a]+e.substr(a+1):c>=0?n.substr(0,c)+t[c]+e.substr(c+1):null;o(n[a],s)<0&&(c=a)}return u<r.length&&"next"===i?n+e.substr(n.length):u<n.length&&"prev"===i?n.substr(0,e.length):0>c?null:n.substr(0,c)+r[c]+e.substr(c+1)}function i(n,t,i){function u(n){c=e(n),a=r(n),s="next"===n?en:rn,f=c(i),l=a(i),h=n}var c,a,s,f,l,h;u("next"),n._ondirectionchange=function(n){u(n)},n._addAlgorithm(function(n,e,r){var i=n.key;if("string"!=typeof i)return!1;var u=a(i);if(t(u,l))return e(function(){n["continue"]()}),!0;var c=o(i,u,f,l,s,h);return e(c?function(){n["continue"](c)}:r),!1})}return{between:function(n,t,e,r){return e=e!==!1,r=r===!0,n>t||n===t&&(e||r)&&(!e||!r)?new this._ctx.collClass(this,function(){return dn.only(n)}).limit(0):new this._ctx.collClass(this,function(){return dn.bound(n,t,!e,!r)})},equals:function(n){return new this._ctx.collClass(this,function(){return dn.only(n)})},above:function(n){return new this._ctx.collClass(this,function(){return dn.lowerBound(n,!0)})},aboveOrEqual:function(n){return new this._ctx.collClass(this,function(){return dn.lowerBound(n)})},below:function(n){return new this._ctx.collClass(this,function(){return dn.upperBound(n,!0)})},belowOrEqual:function(n){return new this._ctx.collClass(this,function(){return dn.upperBound(n)})},startsWith:function(t){return"string"!=typeof t?n(new this._ctx.collClass(this),new pn("String expected")):this.between(t,t+String.fromCharCode(65535),!0,!0)},startsWithIgnoreCase:function(t){if("string"!=typeof t)return n(new this._ctx.collClass(this),new pn("String expected"));if(""===t)return this.startsWith(t);var e=new this._ctx.collClass(this,function(){return dn.bound(t.toUpperCase(),t.toLowerCase()+String.fromCharCode(65535))});return i(e,function(n,t){return 0===n.indexOf(t)},t),e._ondirectionchange=function(){n(e,new vn("reverse() not supported with WhereClause.startsWithIgnoreCase()"))},e},equalsIgnoreCase:function(t){if("string"!=typeof t)return n(new this._ctx.collClass(this),new pn("String expected"));var e=new this._ctx.collClass(this,function(){return dn.bound(t.toUpperCase(),t.toLowerCase())});return i(e,function(n,t){return n===t},t),e},anyOf:function(n){var e=this._ctx,r=e.table.schema,o=e.index?r.idxByName[e.index]:r.primKey,i=o&&o.compound,u=t(arguments),c=i?on(en):en;if(u.sort(c),0===u.length)return new this._ctx.collClass(this,function(){return dn.only("")}).limit(0);var a=new this._ctx.collClass(this,function(){return dn.bound(u[0],u[u.length-1])});a._ondirectionchange=function(n){c="next"===n?en:rn,i&&(c=on(c)),u.sort(c)};var s=0;return a._addAlgorithm(function(n,t,e){for(var r=n.key;c(r,u[s])>0;)if(++s,s===u.length)return t(e),!1;return 0===c(r,u[s])?(t(function(){n["continue"]()}),!0):(t(function(){n["continue"](u[s])}),!1)}),a},notEqual:function(n){return this.below(n).or(this._ctx.index).above(n)},noneOf:function(n){var e=this._ctx,r=e.table.schema,o=e.index?r.idxByName[e.index]:r.primKey,i=o&&o.compound,u=t(arguments);if(0===u.length)return new this._ctx.collClass(this);var c=i?on(en):en;u.sort(c);var a=u.reduce(function(n,t){return n?n.concat([[n[n.length-1][1],t]]):[[null,t]]},null);a.push([u[u.length-1],null]);var s=this,f=e.index;return a.reduce(function(n,t){return n?null===t[1]?n.or(f).above(t[0]):n.or(f).between(t[0],t[1],!1,!1):s.below(t[1])},null)},startsWithAnyOf:function(e){function r(n){return n>c[s]}function o(n){return n<u[s]}var i=this._ctx,u=t(arguments);if(!u.every(function(n){return"string"==typeof n}))return n(new i.collClass(this),new pn("startsWithAnyOf() only works with strings"));if(0===u.length)return new i.collClass(this,function(){return dn.only("")}).limit(0);var c=u.map(function(n){return n+String.fromCharCode(65535)}),a=en;u.sort(a);var s=0,f=r,l=new i.collClass(this,function(){return dn.bound(u[0],u[u.length-1]+String.fromCharCode(65535))});return l._ondirectionchange=function(n){"next"===n?(f=r,a=en):(f=o,a=rn),u.sort(a),c.sort(a)},l._addAlgorithm(function(n,t,e){for(var r=n.key;f(r);)if(++s,s===u.length)return t(e),!1;return r>=u[s]&&r<=c[s]?(t(function(){n["continue"]()}),!0):(t(function(){a===en?n["continue"](u[s]):n["continue"](c[s])}),!1)}),l}}}),r(z.prototype,function(){function n(n,t){n.filter=un(n.filter,t)}function t(n,t){n.isMatch=un(n.isMatch,t)}function e(n,t){if(n.isPrimKey)return t;var e=n.table.schema.idxByName[n.index];if(!e)throw new vn("KeyPath "+n.index+" on object store "+t.name+" is not indexed");return n.isPrimKey?t:t.index(e.name)}function r(n,t){return e(n,t)[n.op](n.range||null,n.dir+n.unique)}function o(n,t,e,o,i){n.or?!function(){function u(){2===++f&&e()}function c(n,e,r){if(!a||a(e,r,u,o)){var i=e.primaryKey.toString();s.hasOwnProperty(i)||(s[i]=!0,t(n,e,r))}}var a=n.filter,s={},f=(n.table.schema.primKey.keyPath,0);n.or._iterate(c,u,o,i),nn(r(n,i),n.algorithm,c,u,o,n.table.hook.reading.fire)}():nn(r(n,i),un(n.algorithm,n.filter),t,e,o,n.table.hook.reading.fire)}function i(n){return n.table.schema.instanceTemplate}return{_read:function(n,t){var e=this._ctx;return e.error?e.table._trans(null,function(n,t){t(e.error)}):e.table._idbstore(kn,n).then(t)},_write:function(n){var t=this._ctx;return t.error?t.table._trans(null,function(n,e){e(t.error)}):t.table._idbstore(On,n,"locked")},_addAlgorithm:function(n){var t=this._ctx;t.algorithm=un(t.algorithm,n)},_iterate:function(n,t,e,r){return o(this._ctx,n,t,e,r)},each:function(n){var t=this._ctx;return L&&n(i(t)),this._read(function(e,r,i){o(t,n,e,r,i)})},count:function(n){if(L)return q.resolve(0).then(n);var t=this,r=this._ctx;if(r.filter||r.algorithm||r.or){var i=0;return this._read(function(n,t,e){o(r,function(){return++i,!1},function(){n(i)},t,e)},n)}return this._read(function(n,o,i){var u=e(r,i),c=r.range?u.count(r.range):u.count();c.onerror=A(o,["calling","count()","on",t.name]),c.onsuccess=function(t){n(Math.min(t.target.result,Math.max(0,r.limit-r.offset)))}},n)},sortBy:function(n,t){function e(n,t){return t?e(n[o[t]],t-1):n[i]}function r(n,t){var r=e(n,u),o=e(t,u);return o>r?-c:r>o?c:0}var o=(this._ctx,n.split(".").reverse()),i=o[0],u=o.length-1,c="next"===this._ctx.dir?1:-1;return this.toArray(function(n){return n.sort(r)}).then(t)},toArray:function(n){var t=this._ctx;return this._read(function(n,e,r){L&&n([i(t)]);var u=[];o(t,function(n){u.push(n)},function(){n(u)},e,r)},n)},offset:function(t){var e=this._ctx;return 0>=t?this:(e.offset+=t,e.or||e.algorithm||e.filter?n(e,function(n,e,r){return--t<0}):n(e,function(n,e,r){return 0===t?!0:1===t?(--t,!1):(e(function(){n.advance(t),t=0}),!1)}),this)},limit:function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),n(this._ctx,function(n,e,r){return--t<=0&&e(r),t>=0}),this},until:function(t,e){var r=this._ctx;return L&&t(i(r)),n(this._ctx,function(n,r,o){return t(n.value)?(r(o),e):!0}),this},first:function(n){return this.limit(1).toArray(function(n){return n[0]}).then(n)},last:function(n){return this.reverse().first(n)},and:function(e){return L&&e(i(this._ctx)),n(this._ctx,function(n){return e(n.value)}),t(this._ctx,e),this},or:function(n){return new V(this._ctx.table,n,this)},reverse:function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},desc:function(){return this.reverse()},eachKey:function(n){var t=this._ctx;return L&&n(S(i(this._ctx),this._ctx.index?this._ctx.table.schema.idxByName[this._ctx.index].keyPath:this._ctx.table.schema.primKey.keyPath)),t.isPrimKey||(t.op="openKeyCursor"),this.each(function(t,e){n(e.key,e)})},eachUniqueKey:function(n){return this._ctx.unique="unique",this.eachKey(n)},keys:function(n){var t=this._ctx;t.isPrimKey||(t.op="openKeyCursor");var e=[];return L?new q(this.eachKey.bind(this)).then(function(n){return[n]}).then(n):this.each(function(n,t){e.push(t.key)}).then(function(){return e}).then(n)},uniqueKeys:function(n){return this._ctx.unique="unique",this.keys(n)},firstKey:function(n){return this.limit(1).keys(function(n){return n[0]}).then(n)},lastKey:function(n){return this.reverse().firstKey(n)},distinct:function(){var t={};return n(this._ctx,function(n){var e=n.primaryKey.toString(),r=t.hasOwnProperty(e);return t[e]=!0,!r}),this}}}),i(Y).from(z).extend({modify:function(n){var t=this,e=this._ctx,o=e.table.hook,i=o.updating.fire,u=o.deleting.fire;return L&&"function"==typeof n&&n.call({value:e.table.schema.instanceTemplate},e.table.schema.instanceTemplate),this._write(function(o,c,s,f){function l(n,t,r){k=t.primaryKey;var o={primKey:t.primaryKey,value:n};if(p.call(o,n)!==!1){var i=!o.hasOwnProperty("value"),u=i?t["delete"]():t.update(o.value);++g,u.onerror=A(function(n){return w.push(n),x.push(o.primKey),o.onerror&&o.onerror(n),d(),!0},i?["deleting",n,"from",e.table.name]:["modifying",n,"on",e.table.name]),u.onsuccess=function(n){o.onsuccess&&o.onsuccess(o.value),++b,d()}}else o.onsuccess&&o.onsuccess(o.value)}function h(n){return n&&(w.push(n),x.push(k)),c(new F("Error modifying one or more objects",w,b,x))}function d(){_&&b+w.length===g&&(w.length>0?h():o(b))}var p;if("function"==typeof n)p=i===a&&u===a?n:function(t){var e=D(t);if(n.call(this,t)===!1)return!1;if(this.hasOwnProperty("value")){var r=j(e,this.value),o=i.call(this,r,this.primKey,e,f);o&&(t=this.value,Object.keys(o).forEach(function(n){P(t,n,o[n])}))}else u.call(this,this.primKey,t,f)};else if(i===a){var v=Object.keys(n),m=v.length;p=function(t){for(var e=!1,r=0;m>r;++r){var o=v[r],i=n[o];S(t,o)!==i&&(P(t,o,i),e=!0)}return e}}else{var y=n;n=O(y),p=function(t){var e=!1,o=i.call(this,n,this.primKey,D(t),f);return o&&r(n,o),Object.keys(n).forEach(function(r){var o=n[r];S(t,r)!==o&&(P(t,r,o),e=!0)}),o&&(n=O(y)),e}}var g=0,b=0,_=!1,w=[],x=[],k=null;t._iterate(l,function(){_=!0,d()},h,s)})},"delete":function(){return this.modify(function(){delete this.value})}}),r(this,{Collection:z,Table:G,Transaction:H,Version:l,WhereClause:V,WriteableCollection:Y,WriteableTable:J}),o(),fn.forEach(function(n){n(Dn)})}function a(){}function s(n){return n}function f(n,t){return n===s?t:function(e){return t(n(e))}}function l(n,t){return function(){n.apply(this,arguments),t.apply(this,arguments)}}function h(n,t){return n===a?t:function(){var r=n.apply(this,arguments);r!==e&&(arguments[0]=r);var o=this.onsuccess,i=this.onerror;delete this.onsuccess,delete this.onerror;var u=t.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?l(o,this.onsuccess):o),i&&(this.onerror=this.onerror?l(i,this.onerror):i),u!==e?u:r}}function d(n,t){return n===a?t:function(){var o=n.apply(this,arguments);o!==e&&r(arguments[0],o);var i=this.onsuccess,u=this.onerror;delete this.onsuccess,delete this.onerror;var c=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?l(i,this.onsuccess):i),u&&(this.onerror=this.onerror?l(u,this.onerror):u),o===e?c===e?e:c:c===e?o:r(o,c)}}function p(n,t){return n===a?t:function(){return n.apply(this,arguments)===!1?!1:t.apply(this,arguments)}}function v(n,t){return n===a?t:function(){return t.apply(this,arguments)===!1?!1:n.apply(this,arguments)}}function m(n,t){return n===a?t:function(){n.apply(this,arguments),t.apply(this,arguments)}}function y(n,t){return n===a?t:function(){var e=n.apply(this,arguments);if(e&&"function"==typeof e.then){var r=this,o=arguments;return e.then(function(){return t.apply(r,o)})}return t.apply(this,arguments)}}function g(t,e){function r(n,t,e){if(Array.isArray(n))return i(n);if("object"==typeof n)return o(n);t||(t=p),e||(e=a);var r={subscribers:[],fire:e,subscribe:function(n){r.subscribers.push(n),r.fire=t(r.fire,n)},unsubscribe:function(n){r.subscribers=r.subscribers.filter(function(t){return t!==n}),r.fire=r.subscribers.reduce(t,e)}};return c[n]=s[n]=r,r}function o(t){Object.keys(t).forEach(function(e){var o=t[e];if(Array.isArray(o))r(e,t[e][0],t[e][1]);else{if("asap"!==o)throw new Error("Invalid event config");var i=r(e,null,function(){var t=arguments;i.subscribers.forEach(function(e){_(function(){e.apply(n,t)})})});i.subscribe=function(n){-1===i.subscribers.indexOf(n)&&i.subscribers.push(n)},i.unsubscribe=function(n){var t=i.subscribers.indexOf(n);-1!==t&&i.subscribers.splice(t,1)}}})}function i(n){function t(){return e?!1:void(e=!0)}var e=!1;n.forEach(function(n){r(n).subscribe(t)})}var u=arguments,c={},s=function(n,e){if(e){var r=[].slice.call(arguments,1),o=c[n];return o.subscribe.apply(o,r),t}return"string"==typeof n?c[n]:void 0};s.addEventType=r;for(var f=1,l=u.length;l>f;++f)r(u[f]);return s}function b(n){if(!n)throw new Error("Assertion failed")}function _(t){n.setImmediate?o(t):setTimeout(t,0)}function w(n){var t=setTimeout(n,1e3);clearTimeout(t)}function x(n,t,e){return function(){var r=q.PSD;q.PSD=e;try{n.apply(this,arguments)}catch(o){t(o)}finally{q.PSD=r}}}function S(n,t){if(n.hasOwnProperty(t))return n[t];if(!t)return n;if("string"!=typeof t){for(var r=[],o=0,i=t.length;i>o;++o){var u=S(n,t[o]);r.push(u)}return r}var c=t.indexOf(".");if(-1!==c){var a=n[t.substr(0,c)];return a===e?e:S(a,t.substr(c+1))}return e}function P(n,t,r){if(n&&t!==e)if("string"!=typeof t&&"length"in t){b("string"!=typeof r&&"length"in r);for(var o=0,i=t.length;i>o;++o)P(n,t[o],r[o])}else{var u=t.indexOf(".");if(-1!==u){var c=t.substr(0,u),a=t.substr(u+1);if(""===a)r===e?delete n[c]:n[c]=r;else{var s=n[c];s||(s=n[c]={}),P(s,a,r)}}else r===e?delete n[t]:n[t]=r}}function k(n,t){"string"==typeof t?P(n,t,e):"length"in t&&[].map.call(t,function(t){P(n,t,e)})}function O(n){var t={};for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e]);return t}function D(n){if(!n||"object"!=typeof n)return n;var t;if(Array.isArray(n)){t=[];for(var e=0,r=n.length;r>e;++e)t.push(D(n[e]))}else if(n instanceof Date)t=new Date,t.setTime(n.getTime());else{t=n.constructor?Object.create(n.constructor.prototype):{};for(var o in n)n.hasOwnProperty(o)&&(t[o]=D(n[o]))}return t}function j(n,t){var r={};for(var o in n)n.hasOwnProperty(o)&&(t.hasOwnProperty(o)?n[o]!==t[o]&&JSON.stringify(n[o])!=JSON.stringify(t[o])&&(r[o]=t[o]):r[o]=e);for(var o in t)t.hasOwnProperty(o)&&!n.hasOwnProperty(o)&&(r[o]=t[o]);return r}function T(n){if("function"==typeof n)return new n;if(Array.isArray(n))return[T(n[0])];if(n&&"object"==typeof n){var t={};return E(t,n),t}return n}function E(n,t){Object.keys(t).forEach(function(e){var r=T(t[e]);n[e]=r})}function A(n,t){return function(e){var r=e&&e.target.error||new Error;if(t){var o=" occurred when "+t.map(function(n){switch(typeof n){case"function":return n();case"string":return n;default:return JSON.stringify(n)}}).join(" ");r.name?r.toString=function(){return r.name+o+(r.message?". "+r.message:"")}:r+=o}return n(r),e&&(e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()),!1}}function C(n){try{throw n}catch(t){return t}}function I(n){n.preventDefault()}function K(n){var t,e=c.dependencies.localStorage;if(!e)return n([]);try{t=JSON.parse(e.getItem("Dexie.DatabaseNames")||"[]")}catch(r){t=[]}n(t)&&e.setItem("Dexie.DatabaseNames",JSON.stringify(t))}function N(n,t,e,r,o,i,u){this.name=n,this.keyPath=t,this.unique=e,this.multi=r,this.auto=o,this.compound=i,this.dotted=u;var c="string"==typeof t?t:t&&"["+[].join.call(t,"+")+"]";this.src=(e?"&":"")+(r?"*":"")+(o?"++":"")+c}function B(n,t,e,r){this.name=n,this.primKey=t||new N,this.indexes=e||[new N],this.instanceTemplate=r,this.mappedClass=null,this.idxByName=e.reduce(function(n,t){return n[t.name]=t,n},{})}function F(n,t,e,r){this.name="ModifyError",this.failures=t,this.failedKeys=r,this.successCount=e,this.message=t.join("\n")}function M(n){return 1===n.length?n[0]:n}function R(){var n=c.dependencies.indexedDB,t=n&&(n.getDatabaseNames||n.webkitGetDatabaseNames);return t&&t.bind(n)}var q=function(){function t(n,t){b.push([n,p.call(arguments,1)])}function e(){var t=b;b=[];for(var e=0,r=t.length;r>e;++e){var o=t[e];o[0].apply(n,o[1])}}function r(n){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof n)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],this._catched=!1;var t=this,e=!0;this._PSD=r.PSD;try{d(this,n,function(n){e?m(s,t,n):s(t,n)},function(n){return e?(m(f,t,n),!1):f(t,n)})}finally{e=!1}}function i(n,o){if(null===n._state)return void n._deferreds.push(o);var i=n._state?o.onFulfilled:o.onRejected;if(null===i)return(n._state?o.resolve:o.reject)(n._value);var u,a=y;y=!1,m=t;try{var s=r.PSD;r.PSD=n._PSD,u=i(n._value),n._state||u&&"function"==typeof u.then&&u._state===!1||c(n),o.resolve(u)}catch(f){var l=o.reject(f);if(!l&&n.onuncatched)try{n.onuncatched(f)}catch(f){}}finally{if(r.PSD=s,a){do{for(;b.length>0;)e();var h=_.pop();if(h)try{h()}catch(f){}}while(_.length>0||b.length>0);m=v,y=!0}}}function u(n){var r=y;y=!1,m=t;try{n()}finally{if(r){do{for(;b.length>0;)e();var o=_.pop();if(o)try{o()}catch(i){}}while(_.length>0||b.length>0);m=v,y=!0}}}function c(n){n._catched=!0,n._parent&&c(n._parent)}function s(n,t){var e=r.PSD;r.PSD=n._PSD;try{if(t===n)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof t.then)return void d(n,function(n,e){t.then(n,e)},function(t){s(n,t)},function(t){f(n,t)});n._state=!0,n._value=t,l.call(n)}catch(o){f(o)}finally{r.PSD=e}}function f(n,t){var e=r.PSD;if(r.PSD=n._PSD,n._state=!1,n._value=t,l.call(n),!n._catched)try{n.onuncatched&&n.onuncatched(n._value),r.on.error.fire(n._value)}catch(o){}return r.PSD=e,n._catched}function l(){for(var n=0,t=this._deferreds.length;t>n;n++)i(this,this._deferreds[n]);this._deferreds=[]}function h(n,t,e,r){this.onFulfilled="function"==typeof n?n:null,this.onRejected="function"==typeof t?t:null,this.resolve=e,this.reject=r}function d(n,t,e,r){var o=!1;try{t(function(n){o||(o=!0,e(n))},function(t){return o?n._catched:(o=!0,r(t))})}catch(i){if(o)return;return r(i)}}var p=[].slice,v="undefined"==typeof o?function(t,e,r,o){var i=arguments;setTimeout(function(){t.apply(n,p.call(i,1))},0)}:o;w(function(){v=m=t=function(t){var e=arguments;setTimeout(function(){t.apply(n,p.call(e,1))},0)}});var m=v,y=!0,b=[],_=[];return r.on=g(null,"error"),r.all=function(){var n=Array.prototype.slice.call(1===arguments.length&&Array.isArray(arguments[0])?arguments[0]:arguments);return new r(function(t,e){function r(i,u){try{if(u&&("object"==typeof u||"function"==typeof u)){var c=u.then;if("function"==typeof c)return void c.call(u,function(n){r(i,n)},e)}n[i]=u,0===--o&&t(n)}catch(a){e(a)}}if(0===n.length)return t([]);for(var o=n.length,i=0;i<n.length;i++)r(i,n[i])})},r.prototype.then=function(n,t){var e=this,o=new r(function(r,o){null===e._state?i(e,new h(n,t,r,o)):m(i,e,new h(n,t,r,o))});return o._PSD=this._PSD,o.onuncatched=this.onuncatched,o._parent=this,o},r.prototype._then=function(n,t){i(this,new h(n,t,a,a))},r.prototype["catch"]=function(n){if(1===arguments.length)return this.then(null,n);var t=arguments[0],e=arguments[1];return"function"==typeof t?this.then(null,function(n){return n instanceof t?e(n):r.reject(n)}):this.then(null,function(n){return n&&n.name===t?e(n):r.reject(n)})},r.prototype["finally"]=function(n){return this.then(function(t){return n(),t},function(t){return n(),r.reject(t)})},r.prototype.onuncatched=null,r.resolve=function(n){var t=new r(function(){});return t._state=!0,t._value=n,t},r.reject=function(n){var t=new r(function(){});return t._state=!1,t._value=n,t},r.race=function(n){return new r(function(t,e){n.map(function(n){n.then(t,e)})})},r.PSD=null,r.newPSD=function(n){var t=r.PSD;r.PSD=t?Object.create(t):{};try{return n()}finally{r.PSD=t}},r._rootExec=u,r._tickFinalize=function(n){if(y)throw new Error("Not in a virtual tick");_.push(n)},r}(),U=function(){},L=!1;i(F).from(Error),c["delete"]=function(n){var t=new c(n),e=t["delete"]();return e.onblocked=function(n){return t.on("blocked",n),this},e},c.exists=function(n){return new c(n).open().then(function(n){return n.close(),!0},function(){return!1})},c.getDatabaseNames=function(n){return new q(function(n,t){var e=R();if(e){var r=e();r.onsuccess=function(t){n([].slice.call(t.target.result,0))},r.onerror=A(t)}else K(function(t){return n(t),!1})}).then(n)},c.defineClass=function(n){function t(t){t?r(this,t):L&&E(this,n)}return t},c.ignoreTransaction=function(n){return q.newPSD(function(){return q.PSD.trans=null,n()})},c.spawn=function(){return n.console&&console.warn("Dexie.spawn() is deprecated. Use Dexie.ignoreTransaction() instead."),c.ignoreTransaction.apply(this,arguments)},c.vip=function(n){return q.newPSD(function(){return q.PSD.letThrough=!0,n()})},Object.defineProperty(c,"currentTransaction",{get:function(){return q.PSD&&q.PSD.trans||null}}),c.Promise=q,c.derive=i,c.extend=r,c.override=u,c.events=g,c.getByKeyPath=S,c.setByKeyPath=P,c.delByKeyPath=k,c.shallowClone=O,c.deepClone=D,c.addons=[],c.fakeAutoComplete=U,c.asap=_,c.ModifyError=F,c.MultiModifyError=F,c.IndexSpec=N,c.TableSchema=B;var $=n.idbModules&&n.idbModules.shimIndexedDB?n.idbModules:{};c.dependencies={indexedDB:$.shimIndexedDB||n.indexedDB||n.mozIndexedDB||n.webkitIndexedDB||n.msIndexedDB,IDBKeyRange:$.IDBKeyRange||n.IDBKeyRange||n.webkitIDBKeyRange,IDBTransaction:$.IDBTransaction||n.IDBTransaction||n.webkitIDBTransaction,Error:n.Error||String,SyntaxError:n.SyntaxError||String,TypeError:n.TypeError||String,DOMError:n.DOMError||String,localStorage:null!=("undefined"!=typeof chrome&&null!==chrome?chrome.storage:void 0)?null:n.localStorage},c.version=1.2,t("Dexie",c),w(function(){c.fakeAutoComplete=U=w,c.fake=L=!0})}).apply(null,[self||window,function(o,i){r=function(){return i}.call(t,e,t,n),!(void 0!==r&&(n.exports=r))}])}).call(t,e(168).setImmediate)},178:function(n,t){function e(){s=!1,u.length?a=u.concat(a):f=-1,a.length&&r()}function r(){if(!s){var n=setTimeout(e);s=!0;for(var t=a.length;t;){for(u=a,a=[];++f<t;)u&&u[f].run();f=-1,t=a.length}u=null,s=!1,clearTimeout(n)}}function o(n,t){this.fun=n,this.array=t}function i(){}var u,c=n.exports={},a=[],s=!1,f=-1;c.nextTick=function(n){var t=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)t[e-1]=arguments[e];a.push(new o(n,t)),1!==a.length||s||setTimeout(r,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=i,c.addListener=i,c.once=i,c.off=i,c.removeListener=i,c.removeAllListeners=i,c.emit=i,c.binding=function(n){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(n){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}}});